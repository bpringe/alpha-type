function drawGameOverProg(){$("#gameOverProg").css({width:gameOverProg+"%"})}function clearCanvas(){$("#canvas").empty()}function drawDivArray(){for(clearCanvas(),i=0;i<divArray.length;i++)divArray[i].draw()}function drawStats(){$("#scoreNum").text(score)}function drawScreen(){drawStats(),drawDivArray(),drawGameOverProg()}function gameOver(){gameRunning=!1,clearInterval(updateInterval),clearInterval(drawScreenInterval),divArray=[],$("#canvas").append("<div id='gameOverMessage' style='display: none'>Game Over</div>"),$("#canvas").animate({backgroundColor:"black"},1e3),$("#gameOverMessage").delay(1e3).fadeIn(2e3),$("#startMessage").delay(2e3).fadeIn(2e3),$.post("scoreHandler.php",{score:score},function(e){"true"===e&&$("#highScoreModal").modal("show")})}function updateGame(){for(gameOverProg>=100&&gameOver(),updates++,i=0;i<divArray.length;i++)divArray[i].topOffset+=divArray[i].speed,divArray[i].topOffset+(divArray[i].height+2)>CANVAS_HEIGHT&&(divArray[i+1].topOffset+=divArray[i+1].speed,divArray.splice(i,1),gameOverProg+=gameOverIncrement);updates%divSpawnRate===0&&divArray.push(new Div)}function initGame(){$("#titleHeader").css({left:CANVAS_LEFT_OFFSET+CANVAS_WIDTH/2-$("#titleHeader").width()/2+"px"}),$("#canvas").css({width:CANVAS_WIDTH+"px",height:CANVAS_HEIGHT+"px",top:CANVAS_TOP_OFFSET+"px",left:CANVAS_LEFT_OFFSET,"background-color":"white"}),$("#gameOverProgDiv").css({top:CANVAS_TOP_OFFSET+CANVAS_HEIGHT+20+"px",left:CANVAS_LEFT_OFFSET+"px",width:CANVAS_WIDTH+"px"}),$("#score").css({left:CANVAS_LEFT_OFFSET+"px",top:CANVAS_TOP_OFFSET-$("#score").height()-40+"px"}),$("#startMessage").css({left:CANVAS_LEFT_OFFSET+$("#score").width()+50+"px",top:CANVAS_TOP_OFFSET-$("#score").height()-40+"px","background-color":"#32BA36"}),$("#highScoresDiv").css({top:CANVAS_TOP_OFFSET+"px",left:CANVAS_LEFT_OFFSET+CANVAS_WIDTH+20+"px"})}function startGame(){gameRunning=!0,$("#startMessage").fadeOut(),divSpawnRate=60,score=0,gameOverProg=0,updates=0,divArray=[],$("#canvas").css({"background-color":"white"}),divArray.push(new Div),updateInterval=setInterval(updateGame,1e3/60),drawScreenInterval=setInterval(drawScreen,1e3/60)}var CANVAS_WIDTH=850,CANVAS_HEIGHT=400,CANVAS_TOP_OFFSET=150,CANVAS_LEFT_OFFSET=50,updates=0,divArray=[],charSet="ABCDEFGHIJKLMNOPQRSTUVWXYZ",divSpawnRate=60,score=0,gameOverProg=0,gameOverIncrement=10,updateInterval,drawScreenInterval,gameRunning=!1,Div=function(){this.width=30,this.height=35,this.topOffset=0,this.leftOffset=Math.floor(Math.random()*(CANVAS_WIDTH-this.width)),this.speed=1,this.content=charSet[Math.floor(Math.random()*charSet.length)]};Div.prototype.draw=function(){$("#canvas").append("<div class='divBlock' style='left:"+this.leftOffset+"px;top:"+this.topOffset+"px;'><span class='divContent'>"+this.content+"</span></div>")},$(document).ready(function(){initGame(),$("#startMessage").click(function(){startGame()}),$(document).keydown(function(e){switch(e.keyCode){case 17:divArray.push(new Div)}}),$(document).keyup(function(e){for(i=0;i<divArray.length;i++)if(e.keyCode===divArray[i].content.charCodeAt(0)){divArray.splice(i,1),score++,score%10===0&&(divSpawnRate-=2);break}}),$.get("scoreHandler.php",function(e){$.each(e,function(e,a){$("#highScores").append("<li>"+a.name+"<span class='score'>"+a.score+"</span></li>")})}),$("#saveButton").click(function(){$("#highScoreModal").modal("hide"),$.post("scoreHandler.php",{score:score,playerName:$("#playerName").val()},function(e){console.log(e)}),$("#highScores").empty(),$.get("scoreHandler.php",function(e){$.each(e,function(e,a){$("#highScores").append("<li>"+a.name+"<span class='score'>"+a.score+"</span></li>")})})})});